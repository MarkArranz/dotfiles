{{ if .forWork -}}
return {
  {
    "neovim/nvim-lspconfig",
    opts = {
      servers = {
        gopls = {
          settings = {
            gopls = {
              gofumpt = false,
            },
          },
        },
      },
    },
  },
  {
    "stevearc/conform.nvim",
    optional = true,
    opts = {
      formatters_by_ft = {
        go = { "goimports", "gofmt" },
      },
    },
  },
  {
    "coder/claudecode.nvim",
    opts = {
      focus_after_send = true,
      terminal = {
        split_width_percentage = 0.50,
      },
    },
  },
  {
    "folke/snacks.nvim",
    opts = {
      dashboard = {
        preset = {
          header = table.concat({
            "██████╗ ██╗ ██████╗ ██╗████████╗███████╗          ✶",
            "██╔══██╗██║██╔════╝ ██║╚══██╔══╝██╔════╝      ✦    ",
            "██║  ██║██║██║  ███╗██║   ██║   ███████╗   ✧       ",
            "██║  ██║██║██║   ██║██║   ██║   ╚════██║ ·         ",
            "██████╔╝██║╚██████╔╝██║   ██║   ███████║           ",
            "╚═════╝ ╚═╝ ╚═════╝ ╚═╝   ╚═╝   ╚══════╝           ",
          }, "\n"),
        },
      },
    },
  },
  {
    "mfussenegger/nvim-lint",
    optional = true,
    opts = function()
      -- Fix golangci-lint in go.work workspaces: GOMOD=/dev/null in workspace mode
      -- causes nvim-lint to pass a single file path instead of the package directory,
      -- resulting in "undefined" errors for cross-file symbols.
      local linter = require("lint").linters.golangcilint
      if linter and linter.args then
        for i, arg in ipairs(linter.args) do
          if type(arg) == "function" then
            linter.args[i] = function()
              return vim.fn.fnamemodify(vim.api.nvim_buf_get_name(0), ":h")
            end
            break
          end
        end
      end
    end,
  },
  {
    "erichlf/devcontainer-cli.nvim",
    dependencies = { "akinsho/toggleterm.nvim" },
    config = function()
      require("devcontainer-cli").setup({
        interactive = false,
        toplevel = true,
        remove_existing_container = true,
        dotfiles_repository = "https://github.com/MarkArranz/dotfiles.git",
        dotfiles_branch = "main",
        dotfiles_targetPath = "~/dotfiles",
        dotfiles_install_command = "install-devcontainer.sh",
        shell = "bash",
        nvim_binary = "nvim",
        log_level = "debug",
        console_level = "info",
      })
    end,
  },
}
{{- end }}
